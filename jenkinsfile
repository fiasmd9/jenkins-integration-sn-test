pipeline {
    agent any
    stages {
        stage('Example') {
            steps {
                echo 'Hello World'
            }
            
            post { 
                always { 
        script { 
                 def server = Artifactory.server 'JFROG1'
                 def uploadSpec = """{
                    "files": [{
                       "pattern": "/tmp/winstone173134459981961080.jar",
                       "target": "default-docker-virtual/"
                    }]
                 }"""

              def buildInfo = server.upload(uploadSpec) 
              server.publishBuildInfo buildInfo   
        }}
       }
            
        }
        
        stage('Stage2') {
            steps {
            echo "stage2"
            }
        }
    }
    
}
